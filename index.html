<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lista da Casa Nova</title>
<style>
  :root {
    --bg: #121212;
    --panel: #1e1e1e;
    --text: #f5f5f5;
    --muted: #aaaaaa;
    --primary: #cfa66b; /* bambu */
    --danger: #e74c3c;
    --shadow: 0 4px 12px rgba(0,0,0,.4);
    --radius: 12px;
  }

  body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font: 15px/1.6 "Inter", system-ui, sans-serif;
  }

  header {
    padding: 16px;
    background: var(--panel);
    position: sticky;
    top: 0;
    z-index: 10;
    box-shadow: var(--shadow);
  }

  h1 {
    margin: 0;
    font-size: 1.2rem;
  }

  .toolbar {
    margin-top: 10px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 8px 14px;
    border: none;
    border-radius: var(--radius);
    background: var(--primary);
    color: #fff;
    cursor: pointer;
  }

  .btn.secondary { background: #444; }
  .btn.danger { background: var(--danger); }

  .section { margin: 20px auto; max-width: 1000px; }
  .section h2 {
    margin: 0;
    padding: 12px 16px;
    background: var(--panel);
    border-radius: var(--radius);
    cursor: pointer;
  }

  .grid {
    display: grid;
    gap: 16px;
    padding: 16px;
  }
  @media(min-width:700px) { .grid { grid-template-columns: repeat(2, 1fr); } }

  .card {
    background: var(--panel);
    border-radius: var(--radius);
    padding: 12px;
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .card img {
    width: 100%;
    height: 160px;
    object-fit: cover;
    border-radius: var(--radius);
    background: #333;
  }

  .card h3 { margin: 0; font-size: 1rem; }
  .meta { font-size: .9rem; color: var(--muted); }

  .actions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  a.link {
    color: var(--primary);
    text-decoration: none;
    font-size: 0.9rem;
  }

  dialog {
    border: none;
    border-radius: var(--radius);
    padding: 20px;
    background: var(--panel);
    color: var(--text);
    max-width: 400px;
  }

  input, textarea, select {
    padding: 8px 10px;
    border-radius: var(--radius);
    border: 1px solid #444;
    background: #1a1a1a;
    color: var(--text);
    width: 100%;
  }
</style>
</head>
<body>
<header>
  <h1>üè° Lista da Casa Nova</h1>
  <div class="toolbar">
    <button class="btn" id="addBtn">‚ûï Adicionar item</button>
    <button class="btn secondary" id="exportBtn">Exportar</button>
    <label class="btn secondary">Importar<input id="importFile" type="file" hidden></label>
    <button class="btn danger" id="resetBtn">Zerar</button>
  </div>
</header>

<main id="sections"></main>

<dialog id="itemDlg">
  <form method="dialog" style="display:grid;gap:10px">
    <h3 id="dlgTitle">Novo item</h3>
    <input id="f_name" placeholder="Nome" required>
    <select id="f_room">
      <option>Sala</option><option>Quarto</option><option>Cozinha</option><option>Lavanderia</option>
    </select>
    <input id="f_price" placeholder="Valor (R$)">
    <input id="f_link" placeholder="Link do produto">
    <input id="f_img" type="file" accept="image/*">
    <input id="f_imgurl" placeholder="Ou cole URL da imagem">
    <textarea id="f_notes" rows="3" placeholder="Notas"></textarea>
    <menu style="display:flex;gap:10px;justify-content:flex-end">
      <button class="btn secondary" value="cancel">Cancelar</button>
      <button class="btn">Salvar</button>
    </menu>
  </form>
</dialog>

<script>
const KEY="casa_lista_v3";
let items=JSON.parse(localStorage.getItem(KEY)||"[]");

function save(){localStorage.setItem(KEY,JSON.stringify(items));}
function br(v){return v? v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"";}

function render(){
  const rooms=["Sala","Quarto","Cozinha","Lavanderia"];
  const secWrap=document.getElementById("sections");
  secWrap.innerHTML="";
  for(const r of rooms){
    const sec=document.createElement("section");
    sec.className="section";
    sec.innerHTML=`<h2 onclick="this.nextElementSibling.toggleAttribute('hidden')">${r}</h2><div class="grid"></div>`;
    const grid=sec.querySelector(".grid");
    const its=items.filter(i=>i.room===r);
    for(const it of its){
      const card=document.createElement("div");
      card.className="card";
      let imgTag=it.img?`<img src="${it.img}" alt="">`:"";
      card.innerHTML=`
        ${imgTag}
        <h3>${it.name}</h3>
        <div class="meta">${it.price?br(it.price):""}</div>
        ${it.notes?`<div class="meta">${it.notes}</div>`:""}
        ${it.link?`<a class="link" href="${it.link}" target="_blank">üîó Ver no site</a>`:""}
        <label><input type="checkbox" ${it.bought?"checked":""} data-id="${it.id}"> Comprado</label>
        <div class="actions">
          <button class="btn secondary" data-act="edit" data-id="${it.id}">Editar</button>
          <button class="btn danger" data-act="del" data-id="${it.id}">Excluir</button>
        </div>
      `;
      grid.appendChild(card);
    }
    secWrap.appendChild(sec);
  }
  bind();
}

function bind(){
  document.querySelectorAll("[data-id]").forEach(el=>{
    if(el.type==="checkbox"){
      el.onchange=e=>{
        const id=e.target.dataset.id;
        const it=items.find(i=>i.id===id);
        it.bought=e.target.checked; save(); render();
      }
    }
  });
  document.querySelectorAll("[data-act]").forEach(btn=>{
    btn.onclick=e=>{
      const id=btn.dataset.id;
      if(btn.dataset.act==="edit") openModal(items.find(i=>i.id===id));
      if(btn.dataset.act==="del"){items=items.filter(i=>i.id!==id); save(); render();}
    }
  });
}

function openModal(item=null){
  document.getElementById("dlgTitle").textContent=item?"Editar item":"Novo item";
  f_name.value=item?.name||"";
  f_room.value=item?.room||"Sala";
  f_price.value=item?.price||"";
  f_link.value=item?.link||"";
  f_img.value="";
  f_imgurl.value=item?.img||"";
  f_notes.value=item?.notes||"";
  itemDlg.showModal();
  itemDlg.onsubmit=(e)=>{
    e.preventDefault();
    const file=f_img.files[0];
    if(file){
      const reader=new FileReader();
      reader.onload=()=>{saveItem(item,reader.result);}
      reader.readAsDataURL(file);
    } else {
      saveItem(item,f_imgurl.value);
    }
  }
}

function saveItem(item,img){
  if(item){
    item.name=f_name.value;
    item.room=f_room.value;
    item.price=Number(f_price.value.replace(",","."));
    item.link=f_link.value;
    item.img=img;
    item.notes=f_notes.value;
  } else {
    items.push({
      id:crypto.randomUUID(),
      name:f_name.value,
      room:f_room.value,
      price:Number(f_price.value.replace(",",".")||0),
      link:f_link.value,
      img:img,
      notes:f_notes.value,
      bought:false
    });
  }
  save(); itemDlg.close(); render();
}

addBtn.onclick=()=>openModal();
resetBtn.onclick=()=>{if(confirm("Apagar tudo?")){items=[];save();render();}};
exportBtn.onclick=()=>{
  const blob=new Blob([JSON.stringify(items)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="casa.json"; a.click();
};
importFile.onchange=e=>{
  const f=e.target.files[0]; if(!f)return;
  const fr=new FileReader();
  fr.onload=()=>{items=JSON.parse(fr.result);save();render();};
  fr.readAsText(f);
};

render();
</script>
</body>
</html>

add index.html
